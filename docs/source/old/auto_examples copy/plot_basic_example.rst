.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_plot_basic_example.py>`     to download the full example code
    .. rst-class:: sphx-glr-example-title

    .. _sphx_glr_auto_examples_plot_basic_example.py:


Basic example
===============

Let's present what classo does when using its default parameters on synthetic data.


.. code-block:: default


    from classo import classo_problem, random_data
    import numpy as np








Generate the data
^^^^^^^^^^^^^^^^^^^^^^^^^^^

This code snippet generates a problem instance with sparse ß in dimension
d=100 (sparsity d_nonzero=5). The design matrix X comprises n=100 samples generated from an i.i.d standard normal
distribution. The dimension of the constraint matrix C is d x k matrix. The noise level is σ=0.5. 
The input `zerosum=True` implies that C is the all-ones vector and Cß=0. The n-dimensional outcome vector y
and the regression vector ß is then generated to satisfy the given constraints. 


.. code-block:: default


    m, d, d_nonzero, k, sigma = 100, 200, 5, 1, 0.5
    (X, C, y), sol = random_data(m, d, d_nonzero, k, sigma, zerosum=True, seed=1)








Remark : one can see the parameters that should be selected :


.. code-block:: default


    print(np.nonzero(sol))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    (array([  7,  63, 148, 164, 168]),)




Define the classo instance
^^^^^^^^^^^^^^^^^^^^^^^^^^^

Next we can define a default c-lasso problem instance with the generated data:


.. code-block:: default


    problem = classo_problem(X, y, C) 








Check parameters
^^^^^^^^^^^^^^^^^^^^^^^^^^^

You can look at the generated problem instance by typing:


.. code-block:: default


    print(problem)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

 
 
    FORMULATION: R3
 
    MODEL SELECTION COMPUTED:  
         Stability selection
 
    STABILITY SELECTION PARAMETERS: 
         numerical_method : not specified
         method : first
         B = 50
         q = 10
         percent_nS = 0.5
         threshold = 0.7
         lamin = 0.01
         Nlam = 50





Solve optimization problems
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

We only use stability selection as default model selection strategy. 
The command also allows you to inspect the computed stability profile for all variables 
at the theoretical λ


.. code-block:: default


    problem.solve()








Visualisation
^^^^^^^^^^^^^^^

After completion, the results of the optimization and model selection routines 
can be visualized using


.. code-block:: default


    print(problem.solution)


.. rst-class:: sphx-glr-horizontal


    *

      .. image:: /auto_examples/images/sphx_glr_plot_basic_example_001.png
          :alt: Stability selection profile of type first using R3
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_plot_basic_example_002.png
          :alt: Refitted coefficients after stability selection
          :class: sphx-glr-multi-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


     STABILITY SELECTION : 
       Selected variables :  7    63    148    164    168    
       Running time :  0.954s






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  1.606 seconds)


.. _sphx_glr_download_auto_examples_plot_basic_example.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_basic_example.py <plot_basic_example.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_basic_example.ipynb <plot_basic_example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
